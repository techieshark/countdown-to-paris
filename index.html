<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Countdown to Paris climate talks</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/flipclock.css">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/style.css">


  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container" style="margin-top: 15%">
    <h3 class="site-header">Countdown to the <a href="http://www.theguardian.com/world/2015/jun/14/paris-climate-meeting-vital">Paris climate talks</a></h3>
    <div class="clock"></div>
    <p>If ever there was a time for action, it's now. And it's running out. What will you do to ensure success at COP21?</p>
    <div id="tweet-container"></div>
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="js/vendor/flipclock.js"></script> <!-- .min -->
<script src="js/vendor/lodash.js"></script>
<script>
  $(document).ready(function () {
    // Grab the current date
    var currentDate = new Date();
    var eventStart = new Date("Nov 30, 2015");

    // Calculate the difference in seconds between the future and current date
    var diff = eventStart.getTime() / 1000 - currentDate.getTime() / 1000;

    // Instantiate a coutdown FlipClock
    clock = $('.clock').FlipClock(diff, {
      clockFace: 'WeeklyCounter',
      // clockFace: 'DailyCounter',

      // showSeconds: true,
      countdown: true,
    });
  });


  // Load Google Analytics
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42432051-2', 'auto');
  ga('send', 'pageview');



  // Load Twitter widgets.js async
  window.twttr = (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0],
      t = window.twttr || {};
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "https://platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js, fjs);

    t._e = [];
    t.ready = function(f) {
      t._e.push(f);
    };

    return t;
  }(document, "script", "twitter-wjs"));



  // Log any kind of Web Intent event to Google Analytics
  // Category: "twitter_web_intents"
  // Action: Intent Event Type
  // Label: Identifier for action taken: tweet_id, screen_name/user_id, click region

  // Define our custom event handlers
  function clickEventToAnalytics (intentEvent) {
    if (!intentEvent) return;
    var label = intentEvent.region;
    pageTracker._trackEvent('twitter_web_intents', intentEvent.type, label);
  }

  function tweetIntentToAnalytics (intentEvent) {
    if (!intentEvent) return;
    var label = "tweet";
    pageTracker._trackEvent(
      'twitter_web_intents',
      intentEvent.type,
      label
    );
  }

  // Wait for the asynchronous resources to load
  twttr.ready(function (twttr) {
    // Now bind our custom intent events
    twttr.events.bind('click', clickEventToAnalytics);
    twttr.events.bind('tweet', tweetIntentToAnalytics);
    // twttr.events.bind('retweet', retweetIntentToAnalytics);
    // twttr.events.bind('favorite', favIntentToAnalytics);
    // twttr.events.bind('follow', followIntentToAnalytics);

    twttr.widgets.createShareButton(
      'https://techieshark.github.io/countdown-to-paris/',
      document.getElementById('tweet-container'),
      {
        text: 'Only 123 days until the #COP21 Paris #climate talks. Our fight for the future. Friends, let\'s join!',
        hashtags: 'cntdwn2paris',
        size: 'large',
        counturl: 'http://www.theguardian.com/world/2015/jun/14/paris-climate-meeting-vital'
      }
    );

  });





</script>
</body>
</html>
